<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Central de Escalas - Louvor</title>
    <link rel="stylesheet" href="../../Shared/CSS/variables.css">
    <link rel="stylesheet" href="../../Shared/CSS/common.css">
    <link rel="stylesheet" href="../../Shared/CSS/navigation.css">
    <link rel="stylesheet" href="../../Shared/CSS/themes.css">
    <link rel="stylesheet" href="../CSS/escalas.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
</head>

<body style="background-color: #f8fafc;">

    <!-- TOP NAVIGATION BAR -->
    <div class="nav-header">
        <div class="nav-left">
            <button class="nav-icon-btn" onclick="window.history.back()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <button class="nav-icon-btn" onclick="window.location.href='../../index.html'">
                <i class="fas fa-home"></i>
            </button>
        </div>
        <div class="nav-center">
            <span class="nav-brand">ESCALAS<strong>HUB</strong></span>
        </div>
        <div class="nav-right">
            <button class="nav-icon-btn" onclick="toggleThemePanel()">
                <i class="fas fa-palette"></i>
            </button>
            <button class="nav-icon-btn" id="masterSyncBtn" onclick="syncAllViews()">
                <i class="fas fa-sync-alt"></i>
            </button>
        </div>
    </div>

    <!-- MAIN CONTENT AREA -->
    <div class="main-content-area">
        <!-- HEADER TITLE SECTION -->
        <div class="page-header">
            <div class="header-text">
                <h1>ESCALAS<strong>HUB</strong></h1>
                <p>Gestão e acompanhamento de equipes.</p>
            </div>

            <div class="header-controls">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" id="globalSearchInput" placeholder="Pesquisar voluntário ou culto..."
                        onkeyup="handleGlobalSearch()">
                </div>

                <div class="view-switcher">
                    <button id="btn-list-view" class="active" onclick="switchView('list')">Lista</button>
                    <button id="btn-calendar-view" onclick="switchView('calendar')">Calendário</button>
                    <button id="btn-cleaning-view" onclick="switchView('cleaning')">Limpeza</button>
                </div>
            </div>
        </div>

        <div id="themePanel" class="theme-panel">
            <h3>Escolha um Tema</h3>
            <div class="theme-buttons" id="themeButtonsGrid"></div>
            <button class="apply-btn" onclick="confirmarTema()">USAR ESTE TEMA</button>
        </div>

        <!-- MODAL AVISO MEMBRO -->
        <div id="modalAvisoMembro" class="modal"
            style="display:none; position:fixed; z-index:10001; left:0; top:0; width:100%; height:100%; background:rgba(0,0,0,0.6); backdrop-filter:blur(8px); align-items:center; justify-content:center; padding:15px;">
            <div class="modal-content"
                style="background:#fff; padding:30px; border-radius:24px; width:100%; max-width:400px; position:relative;">
                <span class="close-modal" onclick="fecharModalAvisoMembro()"
                    style="position:absolute; right:20px; top:20px; font-size:1.5rem; cursor:pointer;">&times;</span>
                <h3 id="displayCultoAviso" style="margin-top:0; font-weight:800; color:var(--primary);">Aviso para Culto
                </h3>
                <input type="hidden" id="inputCultoAviso">
                <textarea id="textoAvisoMembro"
                    placeholder="Descreva o motivo (ex: não poderei ir, chegarei atrasado...)"
                    style="width:100%; height:120px; padding:15px; border-radius:15px; border:1px solid #ddd; margin:15px 0; font-family:inherit; resize:none;"></textarea>
                <button id="btnEnviarAvisoMembro" onclick="enviarAvisoMembro()"
                    style="width:100%; padding:15px; background:var(--primary); color:#fff; border:none; border-radius:15px; font-weight:bold; cursor:pointer;">ENVIAR
                    AVISO</button>
            </div>
        </div>

        <div id="list-view" class="view-section active">

            <div class="premium-container" style="max-width: 1000px; padding-top: 50px;">
                <div id="escala-container" class="container"></div>
            </div>
        </div>

        <div id="calendar-view" class="view-section">
            <div class="premium-container" style="max-width: 1250px; padding-top: 10px;">
                <div class="calendar-actions" style="display: flex; justify-content: flex-end; margin-bottom: 20px;">
                    <button class="btn-export" onclick="exportarEscala()" id="btnExport"
                        style="margin: 0; background: var(--primary); color: white; border: none; width: 45px; height: 45px; border-radius: 50%; font-size: 1.1rem; cursor: pointer; display: flex; align-items: center; justify-content: center; flex-shrink: 0; transition: transform 0.2s;">
                        <i class="fas fa-camera"></i>
                    </button>
                </div>
                <div id="calendarsContainer"></div>
            </div>
        </div>

        <div id="cleaning-view" class="view-section">
            <div class="premium-container" style="max-width: 600px; text-align: center; padding-top: 20px;">
                <div id="limpeza-container"
                    style="background: white; padding: 10px; border-radius: 20px; box-shadow: var(--shadow-lg);">
                    <img id="imgLimpeza" src="" alt="Escala de Limpeza"
                        style="width: 100%; border-radius: 15px; cursor: zoom-in;" onclick="openFullscreenImg()">
                </div>
                <p style="margin-top: 15px; color: #64748b; font-size: 0.9rem; font-weight: 500;">Clique na imagem para
                    ampliar</p>
            </div>
        </div>

        <div id="loader" class="loader-overlay" style="display: none;">
            <div class="loader-spinner"></div>
            <p id="loaderText" style="margin-top: 15px; font-weight: 600; color: white;">Carregando...</p>
        </div>

        <!-- Scripts -->
        <script src="../../Shared/JS/config.js"></script>
        <script src="../../Shared/JS/supabase-helper.js"></script>
        <script src="../../Shared/JS/themes.js"></script>
        <script src="../../Shared/JS/sync.js"></script>
        <script src="../JS/escalas.js"></script>
        <script src="../JS/escala-calendario.js"></script>
        <script src="../JS/limpeza.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

</body>

</html>